<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Οι Κρατήσεις Μου</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet"/>
</head>

<body>

<div class="container mt-4">
    <h2 class="mb-4"> Οι Κρατήσεις Μου</h2>

    <table class="table table-striped">
        <thead>
        <tr>
            <th>Δωμάτιο</th>
            <th>Θέσεις</th>
            <th>Ημερομηνία</th>
            <th>Ώρες</th>
            <th></th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="r : ${reservations}">
            <td th:text="${r.room.name}"></td>
            <td th:text="${r.seatsReserved} + ' θέσεις'"></td>
            <td th:text="${r.date}"></td>
            <td th:text="${r.startTime} + ' - ' + ${r.endTime}"></td>

            <td>
                <form th:action="@{/rooms/reservations/cancel}" method="post"
                      th:if="${r.status.name() == 'ACTIVE' and !r.date.isBefore(T(java.time.LocalDate).now())}">
                    <input type="hidden" name="reservationId" th:value="${r.id}"/>

                    <button class="btn btn-danger" type="submit">
                        Ακύρωση
                    </button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>

    <a href="/profile" class="btn btn-secondary mt-3"> Επιστροφή στο Προφίλ</a>
</div>

</body>
</html>
